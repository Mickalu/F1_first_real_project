{% extends 'base.html' %}
{% load static %}


{% block content %}
{% if messages %}
{% for message in messages %}
{{message}}
{% endfor %}
{% endif %}
<div class="subheader py-2 py-lg-12 subheader-transparent" id="kt_subheader">
    <div class="container">
        
        <!--begin::Toolbar-->
        <div class="d-flex" style="display: flex ! important; justify-content: flex-end ! important;">
            <!--begin::Dropdown-->
            <div class="dropdown dropdown-inline ml-2">
                <input type="button" class="btn btn-white font-weight-bold py-3 px-6" value="Back" onclick="history.back()">
                
            </div>
            <!--end::Dropdown-->
        </div>
        <!--end::Toolbar-->
    </div>
</div>

<div class="d-flex flex-column-fluid">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <div class="card card-custom">
                    <div class="card-header">
                        <h3 class="card-title">Drivers
                        </h3>
                    </div>
                    <!--begin::Form-->
                    <div class="card-body">
                        {% for driver in drivers%}
                        <div class="form-group row">
                            <div class="col-10 ">
                                <h2 style="cursor: pointer;">{{driver.standing}} | {{driver.name}} {{driver.last_name}} </h2>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>     
            </div>
            <div class="col-md-6">
                <div class="card card-custom">
                    <div class="card-header">
                        <h3 class="card-title">
                            Add / edit
                        </h3>
                    </div>
                    <!--begin::Form-->
                    
                    <div class="card-body">
                        <form id="form_group">
                            {% csrf_token %}
                            <div class="form-group row">
                                <div class="col-10">
                                    <input class="form-control" type="text" name="driver_name_form" id="driver_name_form" value="{{name}}" placeholder="name"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-10">
                                    <input class="form-control" type="text" name="driver_last_name_form" id="driver_last_name_form" value="{{last_name}}" placeholder="Last Name"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-10">
                                    <input class="form-control" type="text" name="driver_nationality_form" id="driver_nationality_form" value="{{nationality}}" placeholder="country"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-10">
                                    <input class="form-control" type="text" name="driver_age_form"  id="driver_age_form" value="{{age}}" placeholder="age"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-5">
                                    <input class="form-control" type="datetime" name="driver_date_of_birth_form" id="driver_date_of_birth_form" value="{{date_of_birth}}" placeholder="Birthday"/>
                                </div>
                                <div class="col-5">
                                    <input class="form-control" type="text" name="driver_number_form" id="driver_number_form" value="{{number}}" placeholder="number"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-10">
                                    <input class="form-control" type="text" name="driver_team_form" id="driver_team_form" value="{{team}}" placeholder="team"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-10">
                                    <input class="form-control" type="text" name="driver_point_form" id="driver_point_form"value="{{point}}" placeholder="point"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-10">
                                    <input class="form-control" type="text" name="driver_standing_form" id="driver_standing_form" value="{{standing}}" placeholder="standing"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="example-color-input" class="col-2 col-form-label">Color</label>
                                <div class="col-8">
                                    <input class="form-control" type="color" value="#563d7c" name="driver_color_form" id="driver_color_form"/>
                                </div>
                            </div>
                            <div class="card-footer">
                                <div class="row">
                                    <div class="col-2">
                                    </div>
                                    <div class="col-10">
                                        <button type="submit" name="submit_form" class="btn btn-success mr-2">Submit</button>
                                        <button type="reset" class="btn btn-secondary">Cancel</button>
                                    </div>
                                </div>
                            </div>   
                        </form>
                    </div>
                   
                </div>                   
            </div>
            
        </div>
    </div>
</div>

<script
src="https://code.jquery.com/jquery-2.2.4.js"
integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
crossorigin="anonymous"></script>

<script>
    $(document).on('submit', '#form_group',function(e)
    {
        var url = '{% url "reglages_drivers" %}';
        e.preventDefault();
        // var driver_name = $("#driver_name_form").val();
        // var driver_last_name = $("#driver_last_name_form").val();
        // var driver_nationality = $("#driver_nationality_form").val();
        // var driver_number = $("#driver_number_form").val();
        // var driver_point = $("#driver_point_form").val();
        // var driver_standing = $("#driver_standing_form").val();
        // var driver_color = $("#driver_color_form").val();

        var form_data = new FormData($('#form_group').get(0));
        form_data.append('action', 'add_driver');
        $.ajax({
        headers : {"X-CSRFToken" : '{{csrf_token}}' },
        url : url, 
        type:'POST',
        contentType : false,
        processData : false,
        data : form_data, 
        
        success : function(json) {
            console.log("success");
        },

        error : function(xhr,errmsg,err) {
  
        }
    });
    });
</script>
{% endblock content %}

